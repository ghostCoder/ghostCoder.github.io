"use strict";(self.webpackChunkTeams_PR_Manager=self.webpackChunkTeams_PR_Manager||[]).push([[26],{3026:(e,t,s)=>{s.r(t),s.d(t,{DisplayPRs:()=>j});var o=s(2791),l=s(9132),n=s(535),a=s(6170),r=s(8114),i=s(2475),d=s(4711),c=s(1321),u=s(184);const p=(0,n.Z)({combobox:{marginRight:"1.5em",marginBottom:"3em"},button:{width:"0.3em"}}),g=e=>{let{setSelectedOptions:t,selectedOptions:s,options:n,filterLabel:g}=e;const[x,h]=(0,o.useState)(""),v=(e,s)=>{var o,l;console.log(s.selectedOptions),h(null!==(o=null===(l=s.selectedOptions)||void 0===l?void 0:l.join(", "))&&void 0!==o?o:""),t(s.selectedOptions)},m=p();return(0,u.jsxs)(l.K,{enableScopedSelectors:!0,tokens:{childrenGap:"0.3em"},children:[(0,u.jsxs)(l.K,{horizontal:!0,enableScopedSelectors:!0,tokens:{childrenGap:"0.3em"},children:[(0,u.jsx)(a._,{weight:"semibold",children:g}),(0,u.jsx)(r.z,{icon:(0,u.jsx)(c.F4,{}),shape:"circular",appearance:"subtle",className:m.button,onClick:e=>v(0,{selectedOptions:[],optionValue:void 0,optionText:void 0}),size:"small",children:"Clear"})]}),(0,u.jsx)(i.h,{multiselect:!0,placeholder:"Select status",selectedOptions:s,onOptionSelect:v,className:m.combobox,value:x,children:n.map((e=>{var t;return(0,u.jsxs)(d.W,{text:e.text,children:[null!==(t=e.additional)&&void 0!==t&&t.Icon?(0,u.jsx)(e.additional.Icon,{primaryFill:e.additional.iconColor}):null,e.text]},e.key)}))})]})};var x=s(9921),h=s(9664);const v=s.p+"static/media/no-data.47daacce82b9997cfdfdf1139e26ae5b.svg",m=()=>(0,u.jsxs)(l.K,{enableScopedSelectors:!0,verticalAlign:"center",horizontalAlign:"center",verticalFill:!0,styles:{root:{height:"65vh"}},tokens:{childrenGap:"1em"},children:[(0,u.jsx)(x.E,{alt:"No data image",src:v,height:170}),(0,u.jsx)(l.K,{horizontalAlign:"center",verticalAlign:"center",enableScopedSelectors:!0,tokens:{childrenGap:"2.7em"},children:(0,u.jsx)(h.x,{size:500,block:!0,children:"No PR's to show"})})]});var b=s(6147);const S=(e,t,s,o,l)=>e?b.xG.pipelineFailed:t?b.xG.draft:s?b.xG.setToMerge:o?b.xG.readyToMerge:l?b.xG.readyForReview:b.xG.inProgress,y=e=>{switch(e){case"CREATED":return b.zl.created;case"WAITING_FOR_RESOURCE":return b.zl.waitingForResource;case"PREPARING":return b.zl.preparing;case"PENDING":return b.zl.pending;case"RUNNING":return b.zl.running;case"FAILED":return b.zl.failed;case"SUCCESS":return b.zl.success;case"CANCELED":return b.zl.canceled;case"SKIPPED":return b.zl.skipped;case"MANUAL":return b.zl.manual;case"SCHEDULED":return b.zl.scheduled;default:return{}}};var G=s(9313);const j=e=>{let{data:t,tabType:n}=e;const[a,r]=(0,o.useState)([]),[i,d]=(0,o.useState)([]),[c,p]=(0,o.useState)([]),x=(0,o.useMemo)((()=>(e=>[...new Set(e.map((e=>e.labels.nodes)).flat().map((e=>e.title)))].map((e=>({key:e,text:e}))))(t)),[t]),h=[{key:b.xG.draft.status,text:b.xG.draft.status,additional:{Icon:b.xG.draft.Icon,iconColor:b.xG.draft.iconColor}},{key:b.xG.pipelineFailed.status,text:b.xG.pipelineFailed.status,additional:{Icon:b.xG.pipelineFailed.Icon,iconColor:b.xG.pipelineFailed.iconColor}},{key:b.xG.setToMerge.status,text:b.xG.setToMerge.status,additional:{Icon:b.xG.setToMerge.Icon,iconColor:b.xG.setToMerge.iconColor}},{key:b.xG.readyToMerge.status,text:b.xG.readyToMerge.status,additional:{Icon:b.xG.readyToMerge.Icon,iconColor:b.xG.readyToMerge.iconColor}},{key:b.xG.readyForReview.status,text:b.xG.readyForReview.status,additional:{Icon:b.xG.readyForReview.Icon,iconColor:b.xG.readyForReview.iconColor}},{key:b.xG.inProgress.status,text:b.xG.inProgress.status,additional:{Icon:b.xG.inProgress.Icon,iconColor:b.xG.inProgress.iconColor}}],v=(0,o.useMemo)((()=>(e=>{const t=[...new Set(e.map((e=>{var t;return null!==(t=e.jiraLabels)&&void 0!==t?t:[]})).flat())].map((e=>({key:e,text:e})));return JSON.stringify(t)===JSON.stringify([{key:void 0,text:void 0}])?[]:t})(t)),[t]),j=(0,o.useMemo)((()=>((e,t)=>0!==t.length?e.filter((e=>e.labels.nodes.map((e=>e.title)).some((e=>t.includes(e))))):e)(t,a)),[t,a]),P=(0,o.useMemo)((()=>((e,t,s)=>0!==t.length&&t.length!==s?e.filter((e=>{var s;return t.includes(S("FAILED"===(null===(s=e.headPipeline)||void 0===s?void 0:s.status),e.draft,e.autoMergeEnabled,e.approved,!!e.reviewers.nodes.length).status)})):e)(j,i,h.length)),[j,h.length,i]),f=(0,o.useMemo)((()=>((e,t)=>0!==t.length?e.filter((e=>{const s=e.jiraLabels;return null===s||void 0===s?void 0:s.some((e=>t.includes(e)))})):e)(P,c)),[P,c]),R=(0,o.useMemo)((()=>n===b.gn.reviewRequested?[...f].sort(((e,t)=>e.author.username.localeCompare(t.author.username))):f),[f,n]);let k=[];if(n===b.gn.reviewRequested||n===b.gn.groupPRs||n===b.gn.groupsMergedPRs)for(let s=0;s<R.length;s++){const e=R[s];0===k.length||k[k.length-1].key!==e.author.username?k=[...k,{key:e.author.username,name:"".concat(e.author.name,"'s Pull requests"),startIndex:s,count:1}]:k[k.length-1].count+=1}const w=(0,o.useMemo)((()=>n===b.gn.groupsMergedPRs?R.map((e=>{var t,s;return{key:e.id,title:e.title,webUrl:e.webUrl,reviewers:e.reviewers.nodes,prLabels:e.labels.nodes,assignees:null===(t=e.assignees)||void 0===t?void 0:t.nodes,jiraLabels:e.jiraLabels,pipelineStatus:y(null===(s=e.headPipeline)||void 0===s?void 0:s.status),projectPath:e.project.fullPath,iid:String(e.iid),approvedBy:e.approvedBy.nodes}})):R.map((e=>{var t,s,o;return{key:e.id,title:e.title,webUrl:e.webUrl,reviewers:e.reviewers.nodes,prLabels:e.labels.nodes,prStatus:S("FAILED"===(null===(t=e.headPipeline)||void 0===t?void 0:t.status),e.draft,e.autoMergeEnabled,e.approved,!!e.reviewers.nodes.length),assignees:null===(s=e.assignees)||void 0===s?void 0:s.nodes,jiraLabels:e.jiraLabels,pipelineStatus:y(null===(o=e.headPipeline)||void 0===o?void 0:o.status),projectPath:e.project.fullPath,iid:String(e.iid),approvedBy:e.approvedBy.nodes}}))),[R,n]),C=o.lazy((()=>Promise.all([s.e(27),s.e(302)]).then(s.bind(s,1302)).then((e=>({default:e.PRTable}))))),M=o.lazy((()=>Promise.all([s.e(27),s.e(28)]).then(s.bind(s,6028)).then((e=>({default:e.GroupedTable})))));return(0,u.jsxs)(l.K,{enableScopedSelectors:!0,tokens:{padding:"m"},children:[(0,u.jsxs)(l.K,{enableScopedSelectors:!0,horizontal:!0,wrap:!0,styles:{root:{marginTop:"1em"}},children:[(0,u.jsx)(g,{options:x,setSelectedOptions:r,selectedOptions:a,filterLabel:"Select PR label"}),n!==b.gn.groupsMergedPRs&&(0,u.jsx)(g,{options:h,setSelectedOptions:d,selectedOptions:i,filterLabel:"Select PR status"}),(0,u.jsx)(g,{options:v,setSelectedOptions:p,selectedOptions:c,filterLabel:"Select Jira label"})]}),0===w.length?(0,u.jsx)(m,{}):n===b.gn.myPRs?(0,u.jsx)(o.Suspense,{fallback:(0,u.jsx)(G.g,{loadingText:"Loading PR table..."}),children:(0,u.jsx)(C,{items:w,tabType:n})}):(0,u.jsx)(o.Suspense,{fallback:(0,u.jsx)(G.g,{loadingText:"Loading Grouped PR table..."}),children:(0,u.jsx)(M,{groups:k,items:w,tabType:n})})]})}}}]);
//# sourceMappingURL=26.7868ed38.chunk.js.map